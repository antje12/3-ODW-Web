<!DOCTYPE html>
<html>
    <style>
        .button {
            padding:5px;
            background-color: #dcdcdc;
            border: 1px solid #666;
            color:#000;
            text-decoration:none;
            width: 50px;
            text-align: center;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    <script>
	// === holds page data ===
	class Game {
        constructor() {
            this.stickcount = 20;
            this.gameover = false;
            this.visualize();
        }
		visualize() {
			let $visual = $("#visualization");
			let sticks = "";
			for (let i=0;i<this.stickcount;i++){
				sticks += "/";
			}
			$visual.text("There are " + 
                this.stickcount + 
                " sticks left")
                .append( "<p>"+sticks+"</p>" );
		}
		take(n) {
            if (this.gameover){
                return;
            }

			this.stickcount -= n;
            if (this.stickcount <= 0){
                this.gameover = true;
                $('body').css('background-color', 'red');
                alert("player lost!");
            }
            else{
                this.aiTake();
            }
            this.visualize();
		}
		aiTake() {
			this.stickcount -= 2;
            if (this.stickcount <= 0){
                this.gameover = true;
                $('body').css('background-color', 'green');
                alert("ai lost!");
            }
		}
	}
	
	$(document).ready(() => {
		// === initialization of data =================
		let myGame = new Game();
		myGame.visualize();
		// === setup UI ===============================
		$("#two").addClass("button").click(event => {
			myGame.take(2);
		});
		$("#three").addClass("button").click(event => {
			myGame.take(3);
		});
		$(".button").mousedown(event => { // prevent selection
			event.preventDefault();
		});
	});
</script>
<body>
<h1>Nim The game!</h1>
<p id="two">Take two</p>
<p id="three">Take three</p>
<p id="visualization"></p>
</body>
</html>
